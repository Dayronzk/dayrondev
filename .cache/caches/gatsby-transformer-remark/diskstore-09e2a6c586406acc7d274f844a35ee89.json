{"expireTime":9007200921704140000,"key":"transformer-remark-markdown-ast-5c478ac3863300ca802dca7a83029de3-gatsby-remark-external-linksgatsby-remark-imagesgatsby-remark-code-titlesgatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Dark mode toggle without the flash of default theme. Important bits:","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":69,"offset":69}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":69,"offset":69}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"CSS variables for color theming","position":{"start":{"line":4,"column":3,"offset":73},"end":{"line":4,"column":34,"offset":104}}}],"position":{"start":{"line":4,"column":3,"offset":73},"end":{"line":4,"column":34,"offset":104}}}],"position":{"start":{"line":4,"column":1,"offset":71},"end":{"line":4,"column":34,"offset":104}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Put ","position":{"start":{"line":5,"column":3,"offset":107},"end":{"line":5,"column":7,"offset":111}}},{"type":"html","value":"<code class=\"language-text\">data-theme</code>","position":{"start":{"line":5,"column":7,"offset":111},"end":{"line":5,"column":19,"offset":123}}},{"type":"text","value":" attribute on ","position":{"start":{"line":5,"column":19,"offset":123},"end":{"line":5,"column":33,"offset":137}}},{"type":"html","value":"<code class=\"language-text\">&lt;html></code>","position":{"start":{"line":5,"column":33,"offset":137},"end":{"line":5,"column":41,"offset":145}}},{"type":"text","value":", not ","position":{"start":{"line":5,"column":41,"offset":145},"end":{"line":5,"column":47,"offset":151}}},{"type":"html","value":"<code class=\"language-text\">&lt;body></code>","position":{"start":{"line":5,"column":47,"offset":151},"end":{"line":5,"column":55,"offset":159}}},{"type":"text","value":", so we can run the JS before the DOM finishes rendering","position":{"start":{"line":5,"column":55,"offset":159},"end":{"line":5,"column":111,"offset":215}}}],"position":{"start":{"line":5,"column":3,"offset":107},"end":{"line":5,"column":111,"offset":215}}}],"position":{"start":{"line":5,"column":1,"offset":105},"end":{"line":5,"column":111,"offset":215}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Run local storage check in the ","position":{"start":{"line":6,"column":3,"offset":218},"end":{"line":6,"column":34,"offset":249}}},{"type":"html","value":"<code class=\"language-text\">&lt;head></code>","position":{"start":{"line":6,"column":34,"offset":249},"end":{"line":6,"column":42,"offset":257}}}],"position":{"start":{"line":6,"column":3,"offset":218},"end":{"line":6,"column":42,"offset":257}}}],"position":{"start":{"line":6,"column":1,"offset":216},"end":{"line":6,"column":42,"offset":257}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"JS for toggle button click handler can come after render","position":{"start":{"line":7,"column":3,"offset":260},"end":{"line":7,"column":59,"offset":316}}}],"position":{"start":{"line":7,"column":3,"offset":260},"end":{"line":7,"column":59,"offset":316}}}],"position":{"start":{"line":7,"column":1,"offset":258},"end":{"line":7,"column":59,"offset":316}}}],"position":{"start":{"line":4,"column":1,"offset":71},"end":{"line":7,"column":59,"offset":316}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"HTML","position":{"start":{"line":9,"column":4,"offset":321},"end":{"line":9,"column":8,"offset":325}}}],"position":{"start":{"line":9,"column":1,"offset":318},"end":{"line":9,"column":8,"offset":325}}},{"type":"html","lang":"html","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>light<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    ...\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      <span class=\"token comment\">// If there's a theme stored in localStorage, use it on the &lt;html></span>\n      <span class=\"token keyword\">const</span> localStorageTheme <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>localStorageTheme<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-theme'</span><span class=\"token punctuation\">,</span> localStorageTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-toggle<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-toggle-btn js-theme-toggle<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Activate dark mode<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Activate dark mode<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!--\n        &lt;svg class=\"light-mode\">\n          &lt;use xlink:href=\"#sun\">&lt;/use>\n        &lt;/svg>\n        &lt;svg class=\"dark-mode\">\n          &lt;use xlink:href=\"#moon\">&lt;/use>\n        &lt;/svg>\n        --></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":11,"column":1,"offset":327},"end":{"line":47,"column":4,"offset":1273}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"CSS Variables","position":{"start":{"line":49,"column":4,"offset":1278},"end":{"line":49,"column":17,"offset":1291}}}],"position":{"start":{"line":49,"column":1,"offset":1275},"end":{"line":49,"column":17,"offset":1291}}},{"type":"html","lang":"css","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--text</span><span class=\"token punctuation\">:</span> #000000<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">[data-theme='dark']</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> #000000<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--text</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":51,"column":1,"offset":1293},"end":{"line":61,"column":4,"offset":1410}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"JavaScript","position":{"start":{"line":63,"column":4,"offset":1415},"end":{"line":63,"column":14,"offset":1425}}}],"position":{"start":{"line":63,"column":1,"offset":1412},"end":{"line":63,"column":14,"offset":1425}}},{"type":"html","value":"<div class=\"gatsby-code-title\">app.js</div>"},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> themeToggleBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js-theme-toggle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nthemeToggleBtn<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onToggleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onToggleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> theme <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> themeTo <span class=\"token operator\">=</span> theme <span class=\"token operator\">&amp;&amp;</span> theme <span class=\"token operator\">===</span> <span class=\"token string\">'light'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Activate </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>theme<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> mode</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-theme'</span><span class=\"token punctuation\">,</span> themeTo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">,</span> themeTo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  themeToggleBtn<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'aria-label'</span><span class=\"token punctuation\">,</span> label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  themeToggleBtn<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":65,"column":1,"offset":1427},"end":{"line":81,"column":4,"offset":1984}}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Resources","position":{"start":{"line":83,"column":4,"offset":1989},"end":{"line":83,"column":13,"offset":1998}}}],"position":{"start":{"line":83,"column":1,"offset":1986},"end":{"line":83,"column":13,"offset":1998}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://css-tricks.com/a-complete-guide-to-dark-mode-on-the-web/","children":[{"type":"text","value":"https://css-tricks.com/a-complete-guide-to-dark-mode-on-the-web/","position":{"start":{"line":85,"column":4,"offset":2003},"end":{"line":85,"column":68,"offset":2067}}}],"position":{"start":{"line":85,"column":3,"offset":2002},"end":{"line":85,"column":69,"offset":2068}},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":85,"column":3,"offset":2002},"end":{"line":85,"column":69,"offset":2068}}}],"position":{"start":{"line":85,"column":1,"offset":2000},"end":{"line":85,"column":69,"offset":2068}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://css-tricks.com/flash-of-inaccurate-color-theme-fart/","children":[{"type":"text","value":"https://css-tricks.com/flash-of-inaccurate-color-theme-fart/","position":{"start":{"line":86,"column":4,"offset":2072},"end":{"line":86,"column":64,"offset":2132}}}],"position":{"start":{"line":86,"column":3,"offset":2071},"end":{"line":86,"column":65,"offset":2133}},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":86,"column":3,"offset":2071},"end":{"line":86,"column":65,"offset":2133}}}],"position":{"start":{"line":86,"column":1,"offset":2069},"end":{"line":86,"column":65,"offset":2133}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://mxb.dev/blog/color-theme-switcher/","children":[{"type":"text","value":"https://mxb.dev/blog/color-theme-switcher/","position":{"start":{"line":87,"column":4,"offset":2137},"end":{"line":87,"column":46,"offset":2179}}}],"position":{"start":{"line":87,"column":3,"offset":2136},"end":{"line":87,"column":47,"offset":2180}},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":87,"column":3,"offset":2136},"end":{"line":87,"column":47,"offset":2180}}}],"position":{"start":{"line":87,"column":1,"offset":2134},"end":{"line":87,"column":47,"offset":2180}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.joshwcomeau.com/react/dark-mode/","children":[{"type":"text","value":"https://www.joshwcomeau.com/react/dark-mode/","position":{"start":{"line":88,"column":4,"offset":2184},"end":{"line":88,"column":48,"offset":2228}}}],"position":{"start":{"line":88,"column":3,"offset":2183},"end":{"line":88,"column":49,"offset":2229}},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":88,"column":3,"offset":2183},"end":{"line":88,"column":49,"offset":2229}}}],"position":{"start":{"line":88,"column":1,"offset":2181},"end":{"line":88,"column":49,"offset":2229}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://web.dev/prefers-color-scheme/","children":[{"type":"text","value":"https://web.dev/prefers-color-scheme/","position":{"start":{"line":89,"column":4,"offset":2233},"end":{"line":89,"column":41,"offset":2270}}}],"position":{"start":{"line":89,"column":3,"offset":2232},"end":{"line":89,"column":42,"offset":2271}},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":89,"column":3,"offset":2232},"end":{"line":89,"column":42,"offset":2271}}}],"position":{"start":{"line":89,"column":1,"offset":2230},"end":{"line":89,"column":42,"offset":2271}}}],"position":{"start":{"line":85,"column":1,"offset":2000},"end":{"line":89,"column":42,"offset":2271}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":90,"column":1,"offset":2272}}}}